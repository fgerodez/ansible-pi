- hosts: vm
  vars_files:
    - ./external_vars.yml
  roles:
    - role: system

    - role: networking
      
    - role: nftables

    - role: fail2ban

    - role: minidlna
      
    - role: nextcloud
      vars:
        nextcloud_mariadb_root_password: "{{ db_root_password }}"
      
    - role: torrent

    - role: wireguard

    - role: sonarr

    - role: radarr

    - role: prowlarr
      
    - role: mail
      vars:
        mail_hostname: "{{ mail_server_hostname }}"

    - role: caddy
      vars:
        caddy_proxies: "{{ proxies_list }}"
        caddy_docker_networks: "{{ proxies_networks }}"
