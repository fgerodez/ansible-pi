- hosts: vm
  vars_files:
    - ./external_vars.yml
  roles:
    - role: system

    - role: networking
      
    - role: nftables

    - role: fail2ban

    - role: minidlna
      
    - role: nextcloud

    - role: torrent

    - role: wireguard

    - role: sonarr

    - role: radarr

    - role: prowlarr
      
    - role: mail
      vars:
        mail_hostname: "{{ mail_server_hostname }}"

    - role: caddy
